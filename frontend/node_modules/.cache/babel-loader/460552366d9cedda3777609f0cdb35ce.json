{"remainingRequest":"E:\\MyCode\\eeas\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\MyCode\\eeas\\frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\MyCode\\eeas\\frontend\\src\\utils\\dict\\Dict.js","dependencies":[{"path":"E:\\MyCode\\eeas\\frontend\\src\\utils\\dict\\Dict.js","mtime":1664859458274},{"path":"E:\\MyCode\\eeas\\frontend\\babel.config.js","mtime":1664859458082},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664859706099},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1664859703819},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1664859710378}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi9NeUNvZGUvZWVhcy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5tYXgtc2FmZS1pbnRlZ2VyLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIik7Cgp2YXIgX3RvQ29uc3VtYWJsZUFycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovTXlDb2RlL2VlYXMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXkuanMiKSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovTXlDb2RlL2VlYXMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiKSk7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovTXlDb2RlL2VlYXMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiKSk7Cgp2YXIgX3Z1ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidnVlIikpOwoKdmFyIF9ydW95aSA9IHJlcXVpcmUoIkAvdXRpbHMvcnVveWkiKTsKCnZhciBfRGljdE1ldGEgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vRGljdE1ldGEiKSk7Cgp2YXIgX0RpY3REYXRhID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL0RpY3REYXRhIikpOwoKdmFyIERFRkFVTFRfRElDVF9PUFRJT05TID0gewogIHR5cGVzOiBbXQp9OwovKioNCiAqIEBjbGFzc2Rlc2Mg5a2X5YW4DQogKiBAcHJvcGVydHkge09iamVjdH0gbGFiZWwg5qCH562+5a+56LGh77yM5YaF6YOo5bGe5oCn5ZCN5Li65a2X5YW457G75Z6L5ZCN56ewDQogKiBAcHJvcGVydHkge09iamVjdH0gZGljdCDlrZfmrrXmlbDnu4TvvIzlhoXpg6jlsZ7mgKflkI3kuLrlrZflhbjnsbvlnovlkI3np7ANCiAqIEBwcm9wZXJ0eSB7QXJyYXkuPERpY3RNZXRhPn0gX2RpY3RNZXRhcyDlrZflhbjlhYPmlbDmja7mlbDnu4QNCiAqLwoKdmFyIERpY3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIERpY3QoKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBEaWN0KTsKICAgIHRoaXMub3duZXIgPSBudWxsOwogICAgdGhpcy5sYWJlbCA9IHt9OwogICAgdGhpcy50eXBlID0ge307CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShEaWN0LCBbewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgb3B0aW9ucyA9IHsKICAgICAgICAgIHR5cGVzOiBvcHRpb25zCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIG9wdHMgPSAoMCwgX3J1b3lpLm1lcmdlUmVjdXJzaXZlKShERUZBVUxUX0RJQ1RfT1BUSU9OUywgb3B0aW9ucyk7CgogICAgICBpZiAob3B0cy50eXBlcyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZWVkIGRpY3QgdHlwZXMnKTsKICAgICAgfQoKICAgICAgdmFyIHBzID0gW107CiAgICAgIHRoaXMuX2RpY3RNZXRhcyA9IG9wdHMudHlwZXMubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIF9EaWN0TWV0YS5kZWZhdWx0LnBhcnNlKHQpOwogICAgICB9KTsKCiAgICAgIHRoaXMuX2RpY3RNZXRhcy5mb3JFYWNoKGZ1bmN0aW9uIChkaWN0TWV0YSkgewogICAgICAgIHZhciB0eXBlID0gZGljdE1ldGEudHlwZTsKCiAgICAgICAgX3Z1ZS5kZWZhdWx0LnNldChfdGhpcy5sYWJlbCwgdHlwZSwge30pOwoKICAgICAgICBfdnVlLmRlZmF1bHQuc2V0KF90aGlzLnR5cGUsIHR5cGUsIFtdKTsKCiAgICAgICAgaWYgKGRpY3RNZXRhLmxhenkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHBzLnB1c2gobG9hZERpY3QoX3RoaXMsIGRpY3RNZXRhKSk7CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHBzKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOmHjeaWsOWKoOi9veWtl+WFuA0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIOWtl+WFuOexu+Weiw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZWxvYWREaWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWxvYWREaWN0KHR5cGUpIHsKICAgICAgdmFyIGRpY3RNZXRhID0gdGhpcy5fZGljdE1ldGFzLmZpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS50eXBlID09PSB0eXBlOwogICAgICB9KTsKCiAgICAgIGlmIChkaWN0TWV0YSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCJ0aGUgZGljdCBtZXRhIG9mICIuY29uY2F0KHR5cGUsICIgd2FzIG5vdCBmb3VuZCIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvYWREaWN0KHRoaXMsIGRpY3RNZXRhKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIERpY3Q7Cn0oKTsKLyoqDQogKiDliqDovb3lrZflhbgNCiAqIEBwYXJhbSB7RGljdH0gZGljdCDlrZflhbgNCiAqIEBwYXJhbSB7RGljdE1ldGF9IGRpY3RNZXRhIOWtl+WFuOWFg+aVsOaNrg0KICogQHJldHVybnMge1Byb21pc2V9DQogKi8KCgpleHBvcnRzLmRlZmF1bHQgPSBEaWN0OwoKZnVuY3Rpb24gbG9hZERpY3QoZGljdCwgZGljdE1ldGEpIHsKICByZXR1cm4gZGljdE1ldGEucmVxdWVzdChkaWN0TWV0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIHZhciBfZGljdCR0eXBlJHR5cGU7CgogICAgdmFyIHR5cGUgPSBkaWN0TWV0YS50eXBlOwogICAgdmFyIGRpY3RzID0gZGljdE1ldGEucmVzcG9uc2VDb252ZXJ0ZXIocmVzcG9uc2UsIGRpY3RNZXRhKTsKCiAgICBpZiAoIShkaWN0cyBpbnN0YW5jZW9mIEFycmF5KSkgewogICAgICBjb25zb2xlLmVycm9yKCd0aGUgcmV0dXJuIG9mIHJlc3BvbnNlQ29udmVydGVyIG11c3QgYmUgQXJyYXkuPERpY3REYXRhPicpOwogICAgICBkaWN0cyA9IFtdOwogICAgfSBlbHNlIGlmIChkaWN0cy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQgaW5zdGFuY2VvZiBfRGljdERhdGEuZGVmYXVsdDsKICAgIH0pLmxlbmd0aCAhPT0gZGljdHMubGVuZ3RoKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ3RoZSB0eXBlIG9mIGVsZW1lbnRzIGluIGRpY3RzIG11c3QgYmUgRGljdERhdGEnKTsKICAgICAgZGljdHMgPSBbXTsKICAgIH0KCiAgICAoX2RpY3QkdHlwZSR0eXBlID0gZGljdC50eXBlW3R5cGVdKS5zcGxpY2UuYXBwbHkoX2RpY3QkdHlwZSR0eXBlLCBbMCwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJdLmNvbmNhdCgoMCwgX3RvQ29uc3VtYWJsZUFycmF5Mi5kZWZhdWx0KShkaWN0cykpKTsKCiAgICBkaWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7CiAgICAgIF92dWUuZGVmYXVsdC5zZXQoZGljdC5sYWJlbFt0eXBlXSwgZC52YWx1ZSwgZC5sYWJlbCk7CiAgICB9KTsKICAgIHJldHVybiBkaWN0czsKICB9KTsKfQ=="},{"version":3,"names":["DEFAULT_DICT_OPTIONS","types","Dict","owner","label","type","options","Array","opts","mergeRecursive","undefined","Error","ps","_dictMetas","map","t","DictMeta","parse","forEach","dictMeta","Vue","set","lazy","push","loadDict","Promise","all","find","e","reject","dict","request","then","response","dicts","responseConverter","console","error","filter","d","DictData","length","splice","Number","MAX_SAFE_INTEGER","value"],"sources":["E:/MyCode/eeas/frontend/src/utils/dict/Dict.js"],"sourcesContent":["import Vue from 'vue'\r\nimport { mergeRecursive } from \"@/utils/ruoyi\";\r\nimport DictMeta from './DictMeta'\r\nimport DictData from './DictData'\r\n\r\nconst DEFAULT_DICT_OPTIONS = {\r\n  types: [],\r\n}\r\n\r\n/**\r\n * @classdesc 字典\r\n * @property {Object} label 标签对象，内部属性名为字典类型名称\r\n * @property {Object} dict 字段数组，内部属性名为字典类型名称\r\n * @property {Array.<DictMeta>} _dictMetas 字典元数据数组\r\n */\r\nexport default class Dict {\r\n  constructor() {\r\n    this.owner = null\r\n    this.label = {}\r\n    this.type = {}\r\n  }\r\n\r\n  init(options) {\r\n    if (options instanceof Array) {\r\n      options = { types: options }\r\n    }\r\n    const opts = mergeRecursive(DEFAULT_DICT_OPTIONS, options)\r\n    if (opts.types === undefined) {\r\n      throw new Error('need dict types')\r\n    }\r\n    const ps = []\r\n    this._dictMetas = opts.types.map(t => DictMeta.parse(t))\r\n    this._dictMetas.forEach(dictMeta => {\r\n      const type = dictMeta.type\r\n      Vue.set(this.label, type, {})\r\n      Vue.set(this.type, type, [])\r\n      if (dictMeta.lazy) {\r\n        return\r\n      }\r\n      ps.push(loadDict(this, dictMeta))\r\n    })\r\n    return Promise.all(ps)\r\n  }\r\n\r\n  /**\r\n   * 重新加载字典\r\n   * @param {String} type 字典类型\r\n   */\r\n  reloadDict(type) {\r\n    const dictMeta = this._dictMetas.find(e => e.type === type)\r\n    if (dictMeta === undefined) {\r\n      return Promise.reject(`the dict meta of ${type} was not found`)\r\n    }\r\n    return loadDict(this, dictMeta)\r\n  }\r\n}\r\n\r\n/**\r\n * 加载字典\r\n * @param {Dict} dict 字典\r\n * @param {DictMeta} dictMeta 字典元数据\r\n * @returns {Promise}\r\n */\r\nfunction loadDict(dict, dictMeta) {\r\n  return dictMeta.request(dictMeta)\r\n    .then(response => {\r\n      const type = dictMeta.type\r\n      let dicts = dictMeta.responseConverter(response, dictMeta)\r\n      if (!(dicts instanceof Array)) {\r\n        console.error('the return of responseConverter must be Array.<DictData>')\r\n        dicts = []\r\n      } else if (dicts.filter(d => d instanceof DictData).length !== dicts.length) {\r\n        console.error('the type of elements in dicts must be DictData')\r\n        dicts = []\r\n      }\r\n      dict.type[type].splice(0, Number.MAX_SAFE_INTEGER, ...dicts)\r\n      dicts.forEach(d => {\r\n        Vue.set(dict.label[type], d.value, d.label)\r\n      })\r\n      return dicts\r\n    })\r\n}\r\n"],"mappings":"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"}]}