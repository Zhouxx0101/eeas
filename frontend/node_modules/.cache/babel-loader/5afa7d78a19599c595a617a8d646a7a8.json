{"remainingRequest":"E:\\MyCode\\eeas\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\MyCode\\eeas\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\MyCode\\eeas\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\MyCode\\eeas\\frontend\\src\\views\\monitor\\cache\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\MyCode\\eeas\\frontend\\src\\views\\monitor\\cache\\list.vue","mtime":1664859458314},{"path":"E:\\MyCode\\eeas\\frontend\\babel.config.js","mtime":1664859458082},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664859706099},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1664859703819},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664859706099},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1664859705302}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyIpOwoKdmFyIF9jYWNoZSA9IHJlcXVpcmUoIkAvYXBpL21vbml0b3IvY2FjaGUiKTsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IHsKICBuYW1lOiAiQ2FjaGVMaXN0IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FjaGVOYW1lczogW10sCiAgICAgIGNhY2hlS2V5czogW10sCiAgICAgIGNhY2hlRm9ybToge30sCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHN1YkxvYWRpbmc6IGZhbHNlLAogICAgICBub3dDYWNoZU5hbWU6ICIiLAogICAgICB0YWJsZUhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IC0gMjAwCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q2FjaGVOYW1lcygpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOafpeivoue8k+WtmOWQjeensOWIl+ihqCAqLwogICAgZ2V0Q2FjaGVOYW1lczogZnVuY3Rpb24gZ2V0Q2FjaGVOYW1lcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICgwLCBfY2FjaGUubGlzdENhY2hlTmFtZSkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmNhY2hlTmFtZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKiDliLfmlrDnvJPlrZjlkI3np7DliJfooaggKi8KICAgIHJlZnJlc2hDYWNoZU5hbWVzOiBmdW5jdGlvbiByZWZyZXNoQ2FjaGVOYW1lcygpIHsKICAgICAgdGhpcy5nZXRDYWNoZU5hbWVzKCk7CiAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIt+aWsOe8k+WtmOWIl+ihqOaIkOWKnyIpOwogICAgfSwKCiAgICAvKiog5riF55CG5oyH5a6a5ZCN56ew57yT5a2YICovCiAgICBoYW5kbGVDbGVhckNhY2hlTmFtZTogZnVuY3Rpb24gaGFuZGxlQ2xlYXJDYWNoZU5hbWUocm93KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgKDAsIF9jYWNoZS5jbGVhckNhY2hlTmFtZSkocm93LmNhY2hlTmFtZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuJG1vZGFsLm1zZ1N1Y2Nlc3MoIua4heeQhue8k+WtmOWQjeensFsiICsgX3RoaXMyLm5vd0NhY2hlTmFtZSArICJd5oiQ5YqfIik7CgogICAgICAgIF90aGlzMi5nZXRDYWNoZUtleXMoKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKiDmn6Xor6LnvJPlrZjplK7lkI3liJfooaggKi8KICAgIGdldENhY2hlS2V5czogZnVuY3Rpb24gZ2V0Q2FjaGVLZXlzKHJvdykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBjYWNoZU5hbWUgPSByb3cgIT09IHVuZGVmaW5lZCA/IHJvdy5jYWNoZU5hbWUgOiB0aGlzLm5vd0NhY2hlTmFtZTsKCiAgICAgIGlmIChjYWNoZU5hbWUgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnN1YkxvYWRpbmcgPSB0cnVlOwogICAgICAoMCwgX2NhY2hlLmxpc3RDYWNoZUtleSkoY2FjaGVOYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5jYWNoZUtleXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzMy5zdWJMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMzLm5vd0NhY2hlTmFtZSA9IGNhY2hlTmFtZTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKiDliLfmlrDnvJPlrZjplK7lkI3liJfooaggKi8KICAgIHJlZnJlc2hDYWNoZUtleXM6IGZ1bmN0aW9uIHJlZnJlc2hDYWNoZUtleXMoKSB7CiAgICAgIHRoaXMuZ2V0Q2FjaGVLZXlzKCk7CiAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIt+aWsOmUruWQjeWIl+ihqOaIkOWKnyIpOwogICAgfSwKCiAgICAvKiog5riF55CG5oyH5a6a6ZSu5ZCN57yT5a2YICovCiAgICBoYW5kbGVDbGVhckNhY2hlS2V5OiBmdW5jdGlvbiBoYW5kbGVDbGVhckNhY2hlS2V5KGNhY2hlS2V5KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgKDAsIF9jYWNoZS5jbGVhckNhY2hlS2V5KShjYWNoZUtleSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczQuJG1vZGFsLm1zZ1N1Y2Nlc3MoIua4heeQhue8k+WtmOmUruWQjVsiICsgY2FjaGVLZXkgKyAiXeaIkOWKnyIpOwoKICAgICAgICBfdGhpczQuZ2V0Q2FjaGVLZXlzKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5YiX6KGo5YmN57yA5Y676ZmkICovCiAgICBuYW1lRm9ybWF0dGVyOiBmdW5jdGlvbiBuYW1lRm9ybWF0dGVyKHJvdykgewogICAgICByZXR1cm4gcm93LmNhY2hlTmFtZS5yZXBsYWNlKCI6IiwgIiIpOwogICAgfSwKCiAgICAvKiog6ZSu5ZCN5YmN57yA5Y676ZmkICovCiAgICBrZXlGb3JtYXR0ZXI6IGZ1bmN0aW9uIGtleUZvcm1hdHRlcihjYWNoZUtleSkgewogICAgICByZXR1cm4gY2FjaGVLZXkucmVwbGFjZSh0aGlzLm5vd0NhY2hlTmFtZSwgIiIpOwogICAgfSwKCiAgICAvKiog5p+l6K+i57yT5a2Y5YaF5a656K+m57uGICovCiAgICBoYW5kbGVDYWNoZVZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDYWNoZVZhbHVlKGNhY2hlS2V5KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgKDAsIF9jYWNoZS5nZXRDYWNoZVZhbHVlKSh0aGlzLm5vd0NhY2hlTmFtZSwgY2FjaGVLZXkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM1LmNhY2hlRm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5riF55CG5YWo6YOo57yT5a2YICovCiAgICBoYW5kbGVDbGVhckNhY2hlQWxsOiBmdW5jdGlvbiBoYW5kbGVDbGVhckNhY2hlQWxsKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgICgwLCBfY2FjaGUuY2xlYXJDYWNoZUFsbCkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNi4kbW9kYWwubXNnU3VjY2Vzcygi5riF55CG5YWo6YOo57yT5a2Y5oiQ5YqfIik7CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;;;;;;AA0JA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA,iBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,cADA;MAEAC,aAFA;MAGAC,aAHA;MAIAC,aAJA;MAKAC,iBALA;MAMAC,gBANA;MAOAC;IAPA;EASA,CAZA;EAaAC,OAbA,qBAaA;IACA;EACA,CAfA;EAgBAC;IACA;IACAC,aAFA,2BAEA;MAAA;;MACA;MACA;QACA;QACA;MACA,CAHA;IAIA,CARA;;IASA;IACAC,iBAVA,+BAUA;MACA;MACA;IACA,CAbA;;IAcA;IACAC,oBAfA,gCAeAC,GAfA,EAeA;MAAA;;MACA;QACA;;QACA;MACA,CAHA;IAIA,CApBA;;IAqBA;IACAC,YAtBA,wBAsBAD,GAtBA,EAsBA;MAAA;;MACA;;MACA;QACA;MACA;;MACA;MACA;QACA;QACA;QACA;MACA,CAJA;IAKA,CAjCA;;IAkCA;IACAE,gBAnCA,8BAmCA;MACA;MACA;IACA,CAtCA;;IAuCA;IACAC,mBAxCA,+BAwCAC,QAxCA,EAwCA;MAAA;;MACA;QACA;;QACA;MACA,CAHA;IAIA,CA7CA;;IA8CA;IACAC,aA/CA,yBA+CAL,GA/CA,EA+CA;MACA;IACA,CAjDA;;IAkDA;IACAM,YAnDA,wBAmDAF,QAnDA,EAmDA;MACA;IACA,CArDA;;IAsDA;IACAG,gBAvDA,4BAuDAH,QAvDA,EAuDA;MAAA;;MACA;QACA;MACA,CAFA;IAGA,CA3DA;;IA4DA;IACAI,mBA7DA,iCA6DA;MAAA;;MACA;QACA;MACA,CAFA;IAGA;EAjEA;AAhBA,C","names":["name","data","cacheNames","cacheKeys","cacheForm","loading","subLoading","nowCacheName","tableHeight","created","methods","getCacheNames","refreshCacheNames","handleClearCacheName","row","getCacheKeys","refreshCacheKeys","handleClearCacheKey","cacheKey","nameFormatter","keyFormatter","handleCacheValue","handleClearCacheAll"],"sourceRoot":"src/views/monitor/cache","sources":["list.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-row :gutter=\"10\">\r\n      <el-col :span=\"8\">\r\n        <el-card style=\"height: calc(100vh - 125px)\">\r\n          <div slot=\"header\">\r\n            <span>缓存列表</span>\r\n            <el-button\r\n              style=\"float: right; padding: 3px 0\"\r\n              type=\"text\"\r\n              icon=\"el-icon-refresh-right\"\r\n              @click=\"refreshCacheNames()\"\r\n            ></el-button>\r\n          </div>\r\n          <el-table\r\n            v-loading=\"loading\"\r\n            :data=\"cacheNames\"\r\n            :height=\"tableHeight\"\r\n            highlight-current-row\r\n            @row-click=\"getCacheKeys\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column\r\n              label=\"序号\"\r\n              width=\"60\"\r\n              type=\"index\"\r\n            ></el-table-column>\r\n\r\n            <el-table-column\r\n              label=\"缓存名称\"\r\n              align=\"center\"\r\n              prop=\"cacheName\"\r\n              :show-overflow-tooltip=\"true\"\r\n              :formatter=\"nameFormatter\"\r\n            ></el-table-column>\r\n\r\n            <el-table-column\r\n              label=\"备注\"\r\n              align=\"center\"\r\n              prop=\"remark\"\r\n              :show-overflow-tooltip=\"true\"\r\n            />\r\n            <el-table-column\r\n              label=\"操作\"\r\n              width=\"60\"\r\n              align=\"center\"\r\n              class-name=\"small-padding fixed-width\"\r\n            >\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"text\"\r\n                  icon=\"el-icon-delete\"\r\n                  @click=\"handleClearCacheName(scope.row)\"\r\n                ></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n      </el-col>\r\n\r\n      <el-col :span=\"8\">\r\n        <el-card style=\"height: calc(100vh - 125px)\">\r\n          <div slot=\"header\">\r\n            <span>键名列表</span>\r\n            <el-button\r\n              style=\"float: right; padding: 3px 0\"\r\n              type=\"text\"\r\n              icon=\"el-icon-refresh-right\"\r\n              @click=\"refreshCacheKeys()\"\r\n            ></el-button>\r\n          </div>\r\n          <el-table\r\n            v-loading=\"subLoading\"\r\n            :data=\"cacheKeys\"\r\n            :height=\"tableHeight\"\r\n            highlight-current-row\r\n            @row-click=\"handleCacheValue\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column\r\n              label=\"序号\"\r\n              width=\"60\"\r\n              type=\"index\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              label=\"缓存键名\"\r\n              align=\"center\"\r\n              :show-overflow-tooltip=\"true\"\r\n              :formatter=\"keyFormatter\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"操作\"\r\n              width=\"60\"\r\n              align=\"center\"\r\n              class-name=\"small-padding fixed-width\"\r\n            >\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"text\"\r\n                  icon=\"el-icon-delete\"\r\n                  @click=\"handleClearCacheKey(scope.row)\"\r\n                ></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n      </el-col>\r\n\r\n      <el-col :span=\"8\">\r\n        <el-card :bordered=\"false\" style=\"height: calc(100vh - 125px)\">\r\n          <div slot=\"header\">\r\n            <span>缓存内容</span>\r\n            <el-button\r\n              style=\"float: right; padding: 3px 0\"\r\n              type=\"text\"\r\n              icon=\"el-icon-refresh-right\"\r\n              @click=\"handleClearCacheAll()\"\r\n              >清理全部</el-button\r\n            >\r\n          </div>\r\n          <el-form :model=\"cacheForm\">\r\n            <el-row :gutter=\"32\">\r\n              <el-col :offset=\"1\" :span=\"22\">\r\n                <el-form-item label=\"缓存名称:\" prop=\"cacheName\">\r\n                  <el-input v-model=\"cacheForm.cacheName\" :readOnly=\"true\" />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :offset=\"1\" :span=\"22\">\r\n                <el-form-item label=\"缓存键名:\" prop=\"cacheKey\">\r\n                  <el-input v-model=\"cacheForm.cacheKey\" :readOnly=\"true\" />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :offset=\"1\" :span=\"22\">\r\n                <el-form-item label=\"缓存内容:\" prop=\"cacheValue\">\r\n                  <el-input\r\n                    v-model=\"cacheForm.cacheValue\"\r\n                    type=\"textarea\"\r\n                    :rows=\"8\"\r\n                    :readOnly=\"true\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { listCacheName, listCacheKey, getCacheValue, clearCacheName, clearCacheKey, clearCacheAll } from \"@/api/monitor/cache\";\r\n\r\nexport default {\r\n  name: \"CacheList\",\r\n  data() {\r\n    return {\r\n      cacheNames: [],\r\n      cacheKeys: [],\r\n      cacheForm: {},\r\n      loading: true,\r\n      subLoading: false,\r\n      nowCacheName: \"\",\r\n      tableHeight: window.innerHeight - 200\r\n    };\r\n  },\r\n  created() {\r\n    this.getCacheNames();\r\n  },\r\n  methods: {\r\n    /** 查询缓存名称列表 */\r\n    getCacheNames() {\r\n      this.loading = true;\r\n      listCacheName().then(response => {\r\n        this.cacheNames = response.data;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    /** 刷新缓存名称列表 */\r\n    refreshCacheNames() {\r\n      this.getCacheNames();\r\n      this.$modal.msgSuccess(\"刷新缓存列表成功\");\r\n    },\r\n    /** 清理指定名称缓存 */\r\n    handleClearCacheName(row) {\r\n      clearCacheName(row.cacheName).then(response => {\r\n        this.$modal.msgSuccess(\"清理缓存名称[\" + this.nowCacheName + \"]成功\");\r\n        this.getCacheKeys();\r\n      });\r\n    },\r\n    /** 查询缓存键名列表 */\r\n    getCacheKeys(row) {\r\n      const cacheName = row !== undefined ? row.cacheName : this.nowCacheName;\r\n      if (cacheName === \"\") {\r\n        return;\r\n      }\r\n      this.subLoading = true;\r\n      listCacheKey(cacheName).then(response => {\r\n        this.cacheKeys = response.data;\r\n        this.subLoading = false;\r\n        this.nowCacheName = cacheName;\r\n      });\r\n    },\r\n    /** 刷新缓存键名列表 */\r\n    refreshCacheKeys() {\r\n      this.getCacheKeys();\r\n      this.$modal.msgSuccess(\"刷新键名列表成功\");\r\n    },\r\n    /** 清理指定键名缓存 */\r\n    handleClearCacheKey(cacheKey) {\r\n      clearCacheKey(cacheKey).then(response => {\r\n        this.$modal.msgSuccess(\"清理缓存键名[\" + cacheKey + \"]成功\");\r\n        this.getCacheKeys();\r\n      });\r\n    },\r\n    /** 列表前缀去除 */\r\n    nameFormatter(row) {\r\n      return row.cacheName.replace(\":\", \"\");\r\n    },\r\n    /** 键名前缀去除 */\r\n    keyFormatter(cacheKey) {\r\n      return cacheKey.replace(this.nowCacheName, \"\");\r\n    },\r\n    /** 查询缓存内容详细 */\r\n    handleCacheValue(cacheKey) {\r\n      getCacheValue(this.nowCacheName, cacheKey).then(response => {\r\n        this.cacheForm = response.data;\r\n      });\r\n    },\r\n    /** 清理全部缓存 */\r\n    handleClearCacheAll() {\r\n      clearCacheAll().then(response => {\r\n        this.$modal.msgSuccess(\"清理全部缓存成功\");\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n"]}]}