{"remainingRequest":"E:\\MyCode\\eeas\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\MyCode\\eeas\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\MyCode\\eeas\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\MyCode\\eeas\\frontend\\src\\views\\system\\role\\selectUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\MyCode\\eeas\\frontend\\src\\views\\system\\role\\selectUser.vue","mtime":1664859458332},{"path":"E:\\MyCode\\eeas\\frontend\\babel.config.js","mtime":1664859458082},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664859706099},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1664859703819},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664859706099},{"path":"E:\\MyCode\\eeas\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1664859705302}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyIpOwoKdmFyIF9yb2xlID0gcmVxdWlyZSgiQC9hcGkvc3lzdGVtL3JvbGUiKTsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IHsKICBkaWN0czogWydzeXNfbm9ybWFsX2Rpc2FibGUnXSwKICBwcm9wczogewogICAgLy8g6KeS6Imy57yW5Y+3CiAgICByb2xlSWQ6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgLy8g6YCJ5Lit5pWw57uE5YC8CiAgICAgIHVzZXJJZHM6IFtdLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOacquaOiOadg+eUqOaIt+aVsOaNrgogICAgICB1c2VyTGlzdDogW10sCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHJvbGVJZDogdW5kZWZpbmVkLAogICAgICAgIHVzZXJOYW1lOiB1bmRlZmluZWQsCiAgICAgICAgcGhvbmVudW1iZXI6IHVuZGVmaW5lZAogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5pi+56S65by55qGGCiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnJvbGVJZCA9IHRoaXMucm9sZUlkOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBjbGlja1JvdzogZnVuY3Rpb24gY2xpY2tSb3cocm93KSB7CiAgICAgIHRoaXMuJHJlZnMudGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdyk7CiAgICB9LAogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pIHsKICAgICAgdGhpcy51c2VySWRzID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnVzZXJJZDsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5p+l6K+i6KGo5pWw5o2uCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgKDAsIF9yb2xlLnVuYWxsb2NhdGVkVXNlckxpc3QpKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnVzZXJMaXN0ID0gcmVzLnJvd3M7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXMudG90YWw7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVRdWVyeTogZnVuY3Rpb24gaGFuZGxlUXVlcnkoKSB7CiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovCiAgICByZXNldFF1ZXJ5OiBmdW5jdGlvbiByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7CiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsKICAgIH0sCgogICAgLyoqIOmAieaLqeaOiOadg+eUqOaIt+aTjeS9nCAqLwogICAgaGFuZGxlU2VsZWN0VXNlcjogZnVuY3Rpb24gaGFuZGxlU2VsZWN0VXNlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcm9sZUlkID0gdGhpcy5xdWVyeVBhcmFtcy5yb2xlSWQ7CiAgICAgIHZhciB1c2VySWRzID0gdGhpcy51c2VySWRzLmpvaW4oIiwiKTsKCiAgICAgIGlmICh1c2VySWRzID09ICIiKSB7CiAgICAgICAgdGhpcy4kbW9kYWwubXNnRXJyb3IoIuivt+mAieaLqeimgeWIhumFjeeahOeUqOaItyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgKDAsIF9yb2xlLmF1dGhVc2VyU2VsZWN0QWxsKSh7CiAgICAgICAgcm9sZUlkOiByb2xlSWQsCiAgICAgICAgdXNlcklkczogdXNlcklkcwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuJG1vZGFsLm1zZ1N1Y2Nlc3MocmVzLm1zZyk7CgogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpczIudmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzMi4kZW1pdCgib2siKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;;;;;;;;AA2DA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA,6BADA;EAEAC;IACA;IACAC;MACAC;IADA;EAFA,CAFA;EAQAC,IARA,kBAQA;IACA;MACA;MACAC,cAFA;MAGA;MACAC,WAJA;MAKA;MACAC,QANA;MAOA;MACAC,YARA;MASA;MACAC;QACAC,UADA;QAEAC,YAFA;QAGAT,iBAHA;QAIAU,mBAJA;QAKAC;MALA;IAVA;EAkBA,CA3BA;EA4BAC;IACA;IACAC,IAFA,kBAEA;MACA;MACA;MACA;IACA,CANA;IAOAC,QAPA,oBAOAC,GAPA,EAOA;MACA;IACA,CATA;IAUA;IACAC,qBAXA,iCAWAC,SAXA,EAWA;MACA;QAAA;MAAA;IACA,CAbA;IAcA;IACAC,OAfA,qBAeA;MAAA;;MACA;QACA;QACA;MACA,CAHA;IAIA,CApBA;;IAqBA;IACAC,WAtBA,yBAsBA;MACA;MACA;IACA,CAzBA;;IA0BA;IACAC,UA3BA,wBA2BA;MACA;MACA;IACA,CA9BA;;IA+BA;IACAC,gBAhCA,8BAgCA;MAAA;;MACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QAAArB;QAAAI;MAAA;QACA;;QACA;UACA;;UACA;QACA;MACA,CANA;IAOA;EA9CA;AA5BA,C","names":["dicts","props","roleId","type","data","visible","userIds","total","userList","queryParams","pageNum","pageSize","userName","phonenumber","methods","show","clickRow","row","handleSelectionChange","selection","getList","handleQuery","resetQuery","handleSelectUser"],"sourceRoot":"src/views/system/role","sources":["selectUser.vue"],"sourcesContent":["<template>\r\n  <!-- 授权用户 -->\r\n  <el-dialog title=\"选择用户\" :visible.sync=\"visible\" width=\"800px\" top=\"5vh\" append-to-body>\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\">\r\n      <el-form-item label=\"用户名称\" prop=\"userName\">\r\n        <el-input\r\n          v-model=\"queryParams.userName\"\r\n          placeholder=\"请输入用户名称\"\r\n          clearable\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"手机号码\" prop=\"phonenumber\">\r\n        <el-input\r\n          v-model=\"queryParams.phonenumber\"\r\n          placeholder=\"请输入手机号码\"\r\n          clearable\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-row>\r\n      <el-table @row-click=\"clickRow\" ref=\"table\" :data=\"userList\" @selection-change=\"handleSelectionChange\" height=\"260px\">\r\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n        <el-table-column label=\"用户名称\" prop=\"userName\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column label=\"用户昵称\" prop=\"nickName\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column label=\"邮箱\" prop=\"email\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column label=\"手机\" prop=\"phonenumber\" :show-overflow-tooltip=\"true\" />\r\n        <el-table-column label=\"状态\" align=\"center\" prop=\"status\">\r\n          <template slot-scope=\"scope\">\r\n            <dict-tag :options=\"dict.type.sys_normal_disable\" :value=\"scope.row.status\"/>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ parseTime(scope.row.createTime) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <pagination\r\n        v-show=\"total>0\"\r\n        :total=\"total\"\r\n        :page.sync=\"queryParams.pageNum\"\r\n        :limit.sync=\"queryParams.pageSize\"\r\n        @pagination=\"getList\"\r\n      />\r\n    </el-row>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button type=\"primary\" @click=\"handleSelectUser\">确 定</el-button>\r\n      <el-button @click=\"visible = false\">取 消</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { unallocatedUserList, authUserSelectAll } from \"@/api/system/role\";\r\nexport default {\r\n  dicts: ['sys_normal_disable'],\r\n  props: {\r\n    // 角色编号\r\n    roleId: {\r\n      type: [Number, String]\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      visible: false,\r\n      // 选中数组值\r\n      userIds: [],\r\n      // 总条数\r\n      total: 0,\r\n      // 未授权用户数据\r\n      userList: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        roleId: undefined,\r\n        userName: undefined,\r\n        phonenumber: undefined\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    // 显示弹框\r\n    show() {\r\n      this.queryParams.roleId = this.roleId;\r\n      this.getList();\r\n      this.visible = true;\r\n    },\r\n    clickRow(row) {\r\n      this.$refs.table.toggleRowSelection(row);\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange(selection) {\r\n      this.userIds = selection.map(item => item.userId);\r\n    },\r\n    // 查询表数据\r\n    getList() {\r\n      unallocatedUserList(this.queryParams).then(res => {\r\n        this.userList = res.rows;\r\n        this.total = res.total;\r\n      });\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    /** 选择授权用户操作 */\r\n    handleSelectUser() {\r\n      const roleId = this.queryParams.roleId;\r\n      const userIds = this.userIds.join(\",\");\r\n      if (userIds == \"\") {\r\n        this.$modal.msgError(\"请选择要分配的用户\");\r\n        return;\r\n      }\r\n      authUserSelectAll({ roleId: roleId, userIds: userIds }).then(res => {\r\n        this.$modal.msgSuccess(res.msg);\r\n        if (res.code === 200) {\r\n          this.visible = false;\r\n          this.$emit(\"ok\");\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}